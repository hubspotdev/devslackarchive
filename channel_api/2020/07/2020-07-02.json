[
  {
    "poster": {
      "poster_name": "Shani",
      "poster_handle": "hsdeveloper6"
    },
    "time_stamp": "2020-07-02 03:15:32",
    "text": "thanks <@U2H3TT8F2>, that error is not coming any more. But the hook is not hitting to my URL. When I check in Network tab it shows 500 internal server error. And on message popup it says internal error.\nIs this something related to my code or there is something from HubSpot? Thanks in helping."
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 03:31:48",
    "text": "Hello all .. we are doing integration with 3rd party to provision customers via the API .. so they are asking for the API key … I believe if I gave them the key they will have access to many more information .. is there a possible way to limit the API for them just to add customers .. Thanks",
    "reply_count": 18,
    "reply_users_count": 3,
    "replies": [
      {
        "time_stamp": "2020-07-02 03:38:16"
      },
      {
        "time_stamp": "2020-07-02 04:53:48"
      },
      {
        "time_stamp": "2020-07-02 04:54:17"
      },
      {
        "time_stamp": "2020-07-02 05:00:40"
      },
      {
        "time_stamp": "2020-07-02 05:01:08"
      },
      {
        "time_stamp": "2020-07-02 05:01:47"
      },
      {
        "time_stamp": "2020-07-02 05:02:18"
      },
      {
        "time_stamp": "2020-07-02 05:05:19"
      },
      {
        "time_stamp": "2020-07-02 05:05:34"
      },
      {
        "time_stamp": "2020-07-02 05:05:57"
      },
      {
        "time_stamp": "2020-07-02 05:06:18"
      },
      {
        "time_stamp": "2020-07-02 05:08:52"
      },
      {
        "time_stamp": "2020-07-02 05:12:38"
      },
      {
        "time_stamp": "2020-07-02 05:42:25"
      },
      {
        "time_stamp": "2020-07-02 05:43:26"
      },
      {
        "time_stamp": "2020-07-02 05:49:44"
      },
      {
        "time_stamp": "2020-07-02 09:31:06"
      },
      {
        "time_stamp": "2020-07-02 16:23:36"
      }
    ]
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 03:38:16",
    "edited": {
      "time_stamp": "2020-07-02 03:40:40"
    },
    "text": "Hey <@USUKHCT2L>you’re right to question them. The hapikey will give them full access to all data. To limit them to customer data they will need to use oAuth and have you authorise the application."
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 04:53:48",
    "edited": {
      "time_stamp": "2020-07-02 04:54:07"
    },
    "text": "Hey <@UQERM7BLY> Thanks for the quick feedback. .. will look into how this can be done"
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 04:54:17",
    "text": "if you have any documentation appreciate if you can share"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:00:40",
    "text": "oAuth authentication methods overview (there are two, oauth or hapikey): <https://legacydocs.HubSpot.com/docs/methods/auth/oauth-overview>"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:01:08",
    "text": "oAuth quickstart <https://legacydocs.HubSpot.com/docs/methods/oauth2/oauth2-quickstart>"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:01:47",
    "edited": {
      "time_stamp": "2020-07-02 05:01:59"
    },
    "text": "new documentation might be easier to follow: <https://developers.HubSpot.com/docs/api/working-with-oauth>"
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 05:02:18",
    "text": ":+1:  .. was reading the legacy one .. will check that out .. thanks a lot"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:05:19",
    "text": "It really depends what this 3rd party are offering."
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:05:34",
    "text": "Ultimately, HubSpot has made it fairly easy to migrate contacts yourself."
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:05:57",
    "text": "in their v3 apis they actually have a specific method to import contacts from a CSV"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:06:18",
    "text": "<https://developers.HubSpot.com/docs/api/crm/imports> &lt;- this is actually signed to bulk import data."
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:08:52",
    "text": "If they’re adding contacts one at a time, they should absolutely look at using oAuth - I would not trust them with an HAPIKEY."
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 05:12:38",
    "edited": {
      "time_stamp": "2020-07-02 05:13:10"
    },
    "text": "hmmmmm ….yes they will be doing it once at a time .. I will check if they can save them on a csv and push them like once a day"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:19:44",
    "edited": {
      "time_stamp": "2020-07-02 05:24:25"
    },
    "text": "Can scopes on the API be more granular? I see a use-case for write-only on\n```/contacts/v1/contact/```\ne.g. contacts_read, contacts_write. People will be the granting `contacts` permission, not fully understanding the implication that the application could just invoke `/get_contacts` and pull down everything. Especially for applications which are simply submitting leads.",
    "reply_count": 1,
    "reply_users_count": 1,
    "replies": [
      {
        "time_stamp": "2020-07-02 09:32:14"
      }
    ]
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 05:42:25",
    "text": "ok .. I may open an API from my backend (where I have the secret key) with basic authentication (maybe with IP whitelisting) and it will be as a proxy to add contacts only .. because I  need the contact in real time"
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 05:43:26",
    "text": "3rd party -&gt; me -&gt; HS"
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 05:49:44",
    "edited": {
      "time_stamp": "2020-07-02 05:51:18"
    },
    "text": "That could be a good option. Especially if you only want them to have write-only access."
  },
  {
    "poster": {
      "poster_name": "Matthew Hall",
      "poster_handle": "mhall"
    },
    "time_stamp": "2020-07-02 09:31:06",
    "edited": {
      "time_stamp": "2020-07-02 09:31:13"
    },
    "text": "Yeah... give them an API you control so you can log the activity and do some validation... otherwise... it's a lot of risk of pwnage of some pretty sensitive data from the API key."
  },
  {
    "poster": {
      "poster_name": "Matthew Hall",
      "poster_handle": "mhall"
    },
    "time_stamp": "2020-07-02 09:32:14",
    "edited": {
      "time_stamp": "2020-07-02 09:32:24"
    },
    "text": "Second this. Most OAuth apps in the world in general don't offer nearly enough scopes. When they don't, the annoyingness of OAuth is not canceled out by a value-add, and I usually give up and use an API key..."
  },
  {
    "poster": {
      "poster_name": "Walter Gueler",
      "poster_handle": "wgueler"
    },
    "time_stamp": "2020-07-02 10:10:49",
    "text": "we tried to do something similar in order to create a custom task dashboard and we hit many roadblocks.  Doing it once per day was not a good idea, best approach so far (for engagements) was polling for updates every &lt;5 minutes and saving everything in a local DB. For contacts, companies, and deals you can use webhooks, tickets is the most complicated one"
  },
  {
    "poster": {
      "poster_name": "David F Jones",
      "poster_handle": "david568"
    },
    "time_stamp": "2020-07-02 11:51:44",
    "edited": {
      "time_stamp": "2020-07-02 11:52:18"
    },
    "text": "Hey all, I'm trying to allow a custom Non-HubSpot form to upload an image to a HubSpot account using this endpoint - <https://legacydocs.HubSpot.com/docs/methods/files/post_files>\n\nI'm still quite new to working with apis, so I'm not sure how to actually integrate the python script with the serverless function, or how I should be calling it?",
    "reply_count": 10,
    "reply_users_count": 4,
    "replies": [
      {
        "time_stamp": "2020-07-02 11:54:27"
      },
      {
        "time_stamp": "2020-07-02 11:55:25"
      },
      {
        "time_stamp": "2020-07-02 12:27:43"
      },
      {
        "time_stamp": "2020-07-02 13:12:55"
      },
      {
        "time_stamp": "2020-07-02 13:15:53"
      },
      {
        "time_stamp": "2020-07-02 13:51:34"
      },
      {
        "time_stamp": "2020-07-02 13:55:09"
      },
      {
        "time_stamp": "2020-07-10 03:10:25"
      },
      {
        "time_stamp": "2020-07-10 03:16:20"
      },
      {
        "time_stamp": "2020-07-10 03:18:03"
      }
    ]
  },
  {
    "poster": {
      "poster_name": "Jon McLaren",
      "poster_handle": "jon558"
    },
    "time_stamp": "2020-07-02 11:54:27",
    "edited": {
      "time_stamp": "2020-07-02 11:54:55"
    },
    "text": "If you’re using HubSpot serverless functions you’d want to use nodeJS.\n\nSorry for the inconvenience that our example is just in python. We are in the process of revamping our APIs and the new docs show multiple languages and the ability to test the APIs in the page. That API hasn’t been updated yet."
  },
  {
    "poster": {
      "poster_name": "Jon McLaren",
      "poster_handle": "jon558"
    },
    "time_stamp": "2020-07-02 11:55:25",
    "edited": {
      "time_stamp": "2020-07-02 11:55:54"
    },
    "text": "I’d recommend using postman if you’re not used to node, from postman you can generate the javascript to make the request."
  },
  {
    "poster": {
      "poster_name": "Kieran",
      "poster_handle": "kieran073"
    },
    "time_stamp": "2020-07-02 12:27:43",
    "edited": {
      "time_stamp": "2020-07-02 12:29:52"
    },
    "text": "Hey <@U0133U3RYE8> - as I saw this in the previous chat, here is an example of a serverless function written in Node: <https://github.com/HubSpot/cms-webpack-serverless-boilerplate/tree/master/src/app.functions> It includes a “Hello world” :slightly_smiling_face: - then theres also the Event app: <https://github.com/HubSpot/cms-event-registration/tree/master/src/event.functions>"
  },
  {
    "poster": {
      "poster_name": "David F Jones",
      "poster_handle": "david568"
    },
    "time_stamp": "2020-07-02 13:12:55",
    "text": "So I've tried using Postman for this but seem to be getting an error now.\n\nHere is the code I got from Postman\n\n`var axios = require('axios');`\n`var data = {`\n    `\"folder_paths\": \"folder-in-the-cms-file-manager/subfolder\",`\n    `\"files\": \"‪C:/Users/Dave/Downloads/twitter-logo.png\"`\n`};`\n\n`var config = {`\n  `method: 'post',`\n  `url: '<http://api.hubapi.com/filemanager/api/v2/files?hapikey=xxxxxxx>',`\n  `headers: {` \n    `'Content-Type': 'application/json',` \n  `},`\n  `data : data`\n`};`\n\n`axios(config)`\n`.then(function (response) {`\n  `console.log(JSON.stringify(response.data));`\n`})`\n`.catch(function (error) {`\n  `console.log(error);`\n`});`\n\nBut when I try and hit the serverless function in Postman, I get the following error -\n`{`\n    `\"error\": \"A server error occurred: 2020-07-02T19:10:23.756Z\\tERROR\\tInvoke Error \\t{\\\"errorType\\\":\\\"TypeError\\\",\\\"errorMessage\\\":\\\"customerPayload.main is not a function\\\",\\\"stack\\\":[\\\"TypeError: customerPayload.main is not a function\\\",\\\"    at Runtime.exports.HubSpot_handler [as handler] (/var/task/HubSpotHandler.js:6:21)\\\",\\\"    at Runtime.handleOnce (/var/runtime/Runtime.js:66:25)\\\"]}  Memory: 71/128 MB\\nRuntime: 22.70 ms\"`\n`}`"
  },
  {
    "poster": {
      "poster_name": "Jon McLaren",
      "poster_handle": "jon558"
    },
    "time_stamp": "2020-07-02 13:15:53",
    "text": "use the CMS CLI command for logs to get a log for your serverless function, that can help troubleshoot <https://developers.HubSpot.com/docs/cms/developer-reference/local-development-cms-cli#logs>"
  },
  {
    "poster": {
      "poster_name": "David F Jones",
      "poster_handle": "david568"
    },
    "time_stamp": "2020-07-02 13:51:34",
    "text": "So with Jon's help I am having my logs display properly for my function. I'm unsure of what the error itself means though?\n\n`TypeError: customerPayload.main is not a function`\n\nI'm not sure where it is getting customerPayload.main from?"
  },
  {
    "poster": {
      "poster_name": "Jon McLaren",
      "poster_handle": "jon558"
    },
    "time_stamp": "2020-07-02 13:55:09",
    "text": "Can you DM me a link to your function file?"
  },
  {
    "poster": {
      "poster_name": "Qais Ammari",
      "poster_handle": "qais.ammari"
    },
    "time_stamp": "2020-07-02 16:23:36",
    "text": "Done .. did my own proxy API .. feels much safer now :slightly_smiling_face: thanks all for the advice."
  }
]