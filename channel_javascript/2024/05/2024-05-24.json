[
  {
    "poster": {
      "poster_name": "Brad Robertson",
      "poster_handle": "brad329"
    },
    "time_stamp": "2024-05-24 08:25:45",
    "text": "Thanks <@U0138GAM1UN>. I probably should have been a bit more detailed. This isn't for HubSpot hosted pages, we're actually using the HubSpot Tracking Code (script) directly within our web application (a react app). Similar to <https://knowledge.HubSpot.com/reports/install-the-HubSpot-tracking-code|these instructions>. What we're finding is that simply loading the `<http://js.hs-scripts.com/X.js|js.hs-scripts.com/X.js>` script seems to attempt to load _other_ scripts (mentioned above) that we don't want."
  },
  {
    "poster": {
      "poster_name": "Brad Robertson",
      "poster_handle": "brad329"
    },
    "time_stamp": "2024-05-24 08:26:51",
    "text": "Is `<https://js.hsadspixel.net/fb.js>` for instance something to do with \"sharing\" via Facebook? I assumed it was more around ads and user tracking given the name \"ads pixel\""
  },
  {
    "poster": {
      "poster_name": "Alex Zappa",
      "poster_handle": "reatlat"
    },
    "time_stamp": "2024-05-24 09:16:58",
    "text": "Ohh this is interesting, looks like FB script in fact a collection of helper functions to load various trackers...\n```!function (e) {\n    var n = {};\n\n    function t(o) {\n        if (n[o]) return n[o].exports;\n        var i = n[o] = {i: o, l: !1, exports: {}};\n        e[o].call(i.exports, i, i.exports, t);\n        i.l = !0;\n        return i.exports\n    }\n\n    var o = [{\n        name: \"head-dlb/bundle.production.js\",\n        path: \"head-dlb/static-1.760/bundle.production.js\",\n        ids: {}\n    }];\n\n    t.dlbpr = function (e, n) {\n        var i = o[e];\n        if (!i.r) {\n            i.r = window[\"__webpack_require_\" + i.name + \"__\"];\n            if (!i.r) throw new Error(\"dlb \" + i.name + \" not loaded\");\n            i.r.linkDlb(t, i.ids)\n        }\n        return i.r(n)\n    };\n    t.m = e;\n    t.c = n;\n\n    t.d = function (e, n, o) {\n        t.o(e, n) || Object.defineProperty(e, n, {enumerable: !0, get: o})\n    };\n\n    t.r = function (e) {\n        \"undefined\" != typeof Symbol &amp;&amp; Symbol.toStringTag &amp;&amp; Object.defineProperty(e, Symbol.toStringTag, {value: \"Module\"});\n        Object.defineProperty(e, \"__esModule\", {value: !0})\n    };\n\n    t.t = function (e, n) {\n        1 &amp; n &amp;&amp; (e = t(e));\n        if (8 &amp; n) return e;\n        if (4 &amp; n &amp;&amp; \"object\" == typeof e &amp;&amp; e &amp;&amp; e.__esModule) return e;\n        var o = Object.create(null);\n        t.r(o);\n        Object.defineProperty(o, \"default\", {enumerable: !0, value: e});\n        if (2 &amp; n &amp;&amp; \"string\" != typeof e) for (var i in e) t.d(o, i, function (n) {\n            return e[n]\n        }.bind(null, i));\n        return o\n    };\n\n    t.n = function (e) {\n        var n = e &amp;&amp; e.__esModule ? function () {\n            return e.default\n        } : function () {\n            return e\n        };\n        t.d(n, \"a\", n);\n        return n\n    };\n\n    t.o = function (e, n) {\n        return Object.prototype.hasOwnProperty.call(e, n)\n    };\n\n    t.p = \"//static.hsappstatic.net/adsscriptloaderstatic/static-1.562/\";\n\n    t(t.s = 0)\n}([function (e, n, t) {\n    \"use strict\";\n    t.r(n);\n    const o = \"data-hsjs-portal\",\n        i = \"data-hsjs-env\",\n        a = \"data-hsjs-hublet\",\n        r = {PROD: \"prod\", QA: \"qa\"};\n\n    function d(e) {\n        if (!e) return null;\n        const n = document.querySelectorAll(`script[${e}]`);\n        return n.length ? n[0].getAttribute(e) : null\n    }\n\n    function s() {\n        return d(i) || r.PROD\n    }\n\n    function c() {\n        let e = d(o);\n        e = parseInt(e, 10);\n        if (!e) throw new Error(\"HS Pixel Loader can't identify portalId via \" + o);\n        return e\n    }\n\n    function l() {\n        return d(a) || \"na1\"\n    }\n\n    function u() {\n        return \"withCredentials\" in new XMLHttpRequest\n    }\n\n    function p(e, n) {\n        !function (e, n, t, o, i, a, r) {\n            if (!e.fbq) {\n                i = e.fbq = function () {\n                    i.callMethod ? i.callMethod.apply(i, arguments) : i.queue.push(arguments)\n                };\n                e._fbq || (e._fbq = i);\n                i.push = i;\n                i.loaded = !0;\n                i.version = \"2.0\";\n                i.queue = [];\n                (a = n.createElement(t)).async = !0;\n                a.src = o;\n                (r = n.getElementsByTagName(t)[0]).parentNode.insertBefore(a, r)\n            }\n        }(window, document, \"script\", \"<https://connect.facebook.net/en_US/fbevents.js>\");\n        for (var t = 0; t &lt; e.length; t++) {\n            e[t].limitedDataUseEnabled &amp;&amp; fbq(\"dataProcessingOptions\", [\"LDU\"], 0, 0);\n            fbq(\"init\", \"\" + e[t].pixelId, {external_id: n});\n            fbq(\"set\", \"agent\", \"HubSpot\", \"\" + e[t].pixelId)\n        }\n        fbq(\"track\", \"PageView\")\n    }\n\n    function f(e) {\n        const n = document.createElement(\"script\");\n        n.async = !0;\n        n.src = \"<https://www.googletagmanager.com/gtag/js?id=AW->\" + e;\n        document.head.appendChild(n)\n    }\n\n    function w(e) {\n        window.dataLayer = window.dataLayer || [];\n\n        var n = \"qa\" === s() ? \"dZWU5Zm\" : \"dZTQ1Zm\";\n\n        function t() {\n            dataLayer.push(arguments)\n        }\n\n        t(\"js\", new Date);\n        t(\"set\", \"developer_id.\" + n, !0);\n        for (var o = 0; o &lt; e.length; o++) t(\"config\", \"AW-\" + e[o].pixelId)\n    }\n\n    function b(e) {\n        for (var n = 0; n &lt; e.length; n++) {\n            const t = e[n].pixelId;\n            window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];\n            window._linkedin_data_partner_ids.push(t)\n        }\n\n        !function () {\n            var e = document.getElementsByTagName(\"script\")[0], n = document.createElement(\"script\");\n            n.type = \"text/javascript\";\n            n.async = !0;\n            n.src = \"<https://snap.licdn.com/li.lms-analytics/insight.min.js>\";\n            e.parentNode.insertBefore(n, e)\n        }()\n    }\n\n    function h(e, n) {\n        for (var t in e)\n            if (e.hasOwnProperty(t) &amp;&amp; e[t].length &gt; 0) {\n                var o = e[t];\n                switch (t) {\n                    case\"FACEBOOK\":\n                        if (n &amp;&amp; !e.loadedFbPixel) {\n                            p(o, n);\n                            e.loadedFbPixel = !0\n                        }\n                        break;\n                    case\"ADWORDS\":\n                        f(o[0].pixelId);\n                        w(o);\n                        break;\n                    case\"LINKEDIN\":\n                        b(o)\n                }\n            }\n    }\n\n    function v(e, n) {\n        for (var t in e)\n            if (e.hasOwnProperty(t) &amp;&amp; e[t].length &gt; 0)\n                switch (t) {\n                    case\"FACEBOOK\":\n                        if (!e.loadedFbPixel) {\n                            p(e[t], n);\n                            e.loadedFbPixel = !0\n                        }\n                }\n    }\n\n    function g(e, n) {\n        for (var t in e)\n            if (e.hasOwnProperty(t) &amp;&amp; e[t].length &gt; 0)\n                switch (t) {\n                    case\"FACEBOOK\":\n                        fbq(\"consent\", \"grant\");\n                        break;\n                    case\"ADWORDS\":\n                        dataLayer.push(\"consent\", \"update\", {\n                            ad_storage: \"granted\",\n                            analytics_storage: \"granted\"\n                        })\n                }\n    }\n\n    function m(e) {\n        if (e.hasOwnProperty(\"LINKEDIN\")) window.location.reload(); else for (var n in e)\n            if (e.hasOwnProperty(n) &amp;&amp; e[n].length &gt; 0)\n                switch (n) {\n                    case\"FACEBOOK\":\n                        fbq(\"consent\", \"revoke\");\n                        break;\n                    case\"ADWORDS\":\n                        dataLayer.push(\"consent\", \"update\", {\n                            ad_storage: \"denied\",\n                            analytics_storage: \"denied\"\n                        })\n                }\n    }\n\n    function _({jsonUrl: e, jsonpUrl: n}, t, o) {\n        if (!e &amp;&amp; !n) throw new Error(\"Missing jsonUrl and jsonpUrl args\");\n        u() ? O(e, t) : P(n, t, o)\n    }\n\n    const y = function (e) {\n            return `https://${e}?portalId=${c()}`\n        },\n        O = function (e, n) {\n            const t = new XMLHttpRequest;\n            t.addEventListener(\"load\", () =&gt; {\n                const e = JSON.parse(t.responseText);\n                n(e)\n            });\n            t.open(\"GET\", y(e));\n            t.send()\n        },\n        E = e =&gt; \"HubSpotJsonpCallbackName\" + e,\n        S = function (e, n) {\n            return `https://${e}?${[\"portalId=\" + c(), \"callback=\" + n].join(\"&amp;\")}`\n        },\n        P = function (e, n, t) {\n            const o = document.createElement(\"script\"), i = E(t);\n            window[i] = function (e) {\n                n(e);\n                document.body.removeChild(o);\n                delete window[i]\n            };\n            o.src = S(e, i);\n            document.body.appendChild(o)\n        },\n        j = function () {\n            const e = \"qa\" === s() ? \"qa\" : \"\", n = l(), t = `api${\"na1\" !== n &amp;&amp; n ? \"-\" + n : \"\"}.hubapi${e}.com`;\n            let o, i = null, a = null;\n            window.enabledEventSettings = {FACEBOOK: [], ADWORDS: []};\n            if (!(window.disabledHsPopups &amp;&amp; window.disabledHsPopups.indexOf(\"ADS\") &gt; -1)) {\n                window._hsp = window._hsp || [];\n                window._hsp.push([\"addPrivacyConsentListener\", function (e) {\n                    e.categories.advertisement ? i ? g(i, a) : _({\n                        jsonUrl: t + \"/hs-script-loader-public/v1/config/pixels-and-events/json\",\n                        jsonpUrl: t + \"/hs-script-loader-public/v1/config/pixels-and-events/jsonp\"\n                    }, e =&gt; {\n                        i = e.pixels;\n                        h(e.pixels, a);\n                        window.enabledEventSettings = e.enhancedConversionEventSettings\n                    }, \"addPixels\") : i &amp;&amp; m(i)\n                }]);\n                window._hsq = window._hsq || [];\n                window._hsq.push([\"addUserTokenListener\", function (e) {\n                    a = e;\n                    i &amp;&amp; v(i, a)\n                }]);\n                window.addEventListener(\"message\", e =&gt; {\n                    if (e.data &amp;&amp; \"hsFormCallback\" === e.data.type &amp;&amp; \"onFormSubmitted\" === e.data.eventName) {\n                        window.enabledEventSettings.FACEBOOK &amp;&amp; window.enabledEventSettings.FACEBOOK.forEach(n =&gt; {\n                            r(n, e.data.data)\n                        });\n                        window.enabledEventSettings.ADWORDS &amp;&amp; window.enabledEventSettings.ADWORDS.forEach(n =&gt; {\n                            d(n, e.data.data)\n                        })\n                    }\n                }, !1)\n            }\n\n            function r(e, n) {\n                if (void 0 === window.fbq) return;\n                const {hubSpotFormId: t, eventCategory: o} = e, {conversionId: i, formGuid: a} = n;\n                a === t &amp;&amp; window.fbq(\"track\", o, {}, {eventID: i})\n            }\n\n            function d(e, n) {\n                const {hubSpotFormId: t, pixelId: i, conversionLabel: a} = e, {conversionId: r, formGuid: d} = n;\n                o = function () {\n                    window.dataLayer.push(arguments)\n                };\n                d === t &amp;&amp; null !== a &amp;&amp; o(\"event\", \"conversion\", {send_to: `AW-${i}/${a}`, transaction_id: r})\n            }\n        };\n    window.PIXELS_RAN = window.PIXELS_RAN || !1;\n    if (!window.PIXELS_RAN) {\n        window.PIXELS_RAN = !0;\n        j()\n    }\n}]);```"
  },
  {
    "poster": {
      "poster_name": "Alex Zappa",
      "poster_handle": "reatlat"
    },
    "time_stamp": "2024-05-24 09:18:12",
    "text": "<@U0757252JC9> I think you may get a quick answer by asking HS support via email or chatbot on HS dashboard :slightly_smiling_face:"
  },
  {
    "poster": {
      "poster_name": "Brad Robertson",
      "poster_handle": "brad329"
    },
    "time_stamp": "2024-05-24 09:19:38",
    "text": "ah interesting. Ya this is precisely why we _don't_ want to run this in our web application"
  },
  {
    "poster": {
      "poster_name": "Brad Robertson",
      "poster_handle": "brad329"
    },
    "time_stamp": "2024-05-24 09:19:40",
    "text": "ok thanks <@U0138GAM1UN>"
  }
]