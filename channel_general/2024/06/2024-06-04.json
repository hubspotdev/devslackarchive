[
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:22:20",
    "text": "*Serverless functions: do hublets impact public app authentication?*\nI'm building a public app and it's working well for access tokens generated for the na1 hublet.\n\nBut any call to my serverless function fails when I'm trying to authenticate it via an access token generated by the eu1 hublet.\n\nThe serverless function is hosted on our own HubSpot portal (CMS Enterprise) but we're using a header to act as authentication. This header then passes through to the API calls the function makes to HubSpot. It felt like a straightforward and reasonably elegant authentication process.\n\nWe're calling the serverless function via our own domain (e.g. `<https://www.example.com/_hcms/api/functionName>` )\n\nThe header is just a straightforward Bearer token setup (i.e. `Authorization: Bearer 1234`).\n\nIf that Bearer token was generated by the na1 hublet. We're golden.\nIf it was generated by the eu1 hublet, it 404s for our serverless function. And not just the API calls within it, the serverless function itself 404s. Even though it works just fine for na1 authentication tokens.\n\nI would get it if the error was for the API calls themselves but not for calling the serverless function.\n\nI feel I'm missing something obvious but I figured it might trigger knowledge of a similar experience for someone else. Any ideas?",
    "reply_count": 2,
    "reply_users_count": 1,
    "replies": [
      {
        "time_stamp": "2024-06-04 07:26:58"
      },
      {
        "time_stamp": "2024-06-04 07:57:09"
      }
    ]
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:26:58",
    "edited": {
      "time_stamp": "2024-06-04 07:27:13"
    },
    "text": "Some additional context:\n• No authorization header: 500 error ''Authorization header is missing'\n• Invalid Bearer token is used (e.g. `Bearer 1234`): 500 error 'Request failed with status code 401'\n• Bearer token for a portal in the eu1 hublet is used: 404 error 'Domain <http://www.example.com|www.example.com> not found')\n• Bearer token for a portal in the na1 hublet is used: works perfectly."
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:30:28",
    "text": "Create a private app with a webhook subscription to 'Deal Created'.\nYou can then catch that hook, lookup the associated contact, and then send the email."
  },
  {
    "poster": {
      "poster_name": "Arpad Kőszegi",
      "poster_handle": "arpad.koszegi"
    },
    "time_stamp": "2024-06-04 07:32:19",
    "text": "Right, but that's not the case.\nI already have a private app, which makes the deal in HS. And I would like the email to be sent in HS after the deal is made, and not to call the private app again with a webhook."
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:32:50",
    "text": "Is this a Pro-tier portal?"
  },
  {
    "poster": {
      "poster_name": "Arpad Kőszegi",
      "poster_handle": "arpad.koszegi"
    },
    "time_stamp": "2024-06-04 07:34:39",
    "edited": {
      "time_stamp": "2024-06-04 07:35:25"
    },
    "text": "Hmm... I'm not expert on this... found this info: Marketing Hub Professional as a current plan"
  },
  {
    "poster": {
      "poster_name": "Ryan Johnson",
      "poster_handle": "ryan569"
    },
    "time_stamp": "2024-06-04 07:36:26",
    "edited": {
      "time_stamp": "2024-06-04 07:36:46"
    },
    "text": "This question is more on the ad-tracking side, but need some help for HubSpot <> Google Ads.\nClient is using Clickcease, CallRail, and HubSpot. First attempt at getting tracking right broke keyword tracking in Clickcease.\nAnyone implemented the combo successfully, or know someone who has? Happy to pay for a solution as well."
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:36:49",
    "text": "In that case, I suggest you create this as a workflow with enrollment criteria set as 'associated deals' changed. No need for API work here."
  },
  {
    "text": "hmmm...\ncan't find 'associated deals' there",
    "time_stamp": "2024-06-04 07:39:18"
  },
  {
    "poster": {
      "poster_name": "Arpad Kőszegi",
      "poster_handle": "arpad.koszegi"
    },
    "time_stamp": "2024-06-04 07:41:00",
    "text": "I thought I will find line item name or something, but there is none."
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:44:47",
    "text": "Looks like you've got Deal workflows in this.\nI'd suggest using `Record ID` is known."
  },
  {
    "poster": {
      "poster_name": "Arpad Kőszegi",
      "poster_handle": "arpad.koszegi"
    },
    "time_stamp": "2024-06-04 07:50:57",
    "text": "found Deal type, collaborator... and so on... which type do you mean? Record ID can be the product's ID?"
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:57:09",
    "text": "For now, I've fixed this by moving my authorisation from the headers to the body... but I don't love that solution."
  },
  {
    "poster": {
      "poster_name": "John Kelleher",
      "poster_handle": "john785"
    },
    "time_stamp": "2024-06-04 07:59:54",
    "text": "This might help: <https://www.loom.com/share/2a3552b5791a4358bb8dc178ef7900a7?sid=f3b351cb-9afc-427a-a587-c02fe71802d9>"
  },
  {
    "subtype": "bot_message",
    "text": ":orange_heart:*Please take a moment to review our Code of Conduct*:orange_heart:\n\nWe want the HubSpot Developer community to be inclusive and welcoming. By following our Code of Conduct, you can help ensure that's the case.\n\nTL;DR:\n• Be respectful\n• Be inclusive (try not to say, \"Hey guys, hey boys, hey [any specific group]\")\n• No self promotion, except for <#C0121KGC6RM|showcase> and <#CBNDYJJAZ|jobs> \n• No unsolicited DMs\nRead the <https://developers.HubSpot.com/slack/code-of-conduct|whole thing here> - and thanks for being a part of the HubSpot Developer Community!\n\nWant to report a violation? DM <@UQNEXHW14> or fill out the <https://form.asana.com/?k=p7aM0fpd3G4JGETDL_nYXg&amp;d=8587152060687|anonymous form here>.",
    "username": "Code of Conduct Reminder",
    "time_stamp": "2024-06-04 09:00:02",
    "edited": {
      "time_stamp": "2024-06-04 09:00:11"
    }
  },
  {
    "poster": {
      "poster_name": "Barry Grennan",
      "poster_handle": "barry"
    },
    "time_stamp": "2024-06-04 10:29:50",
    "text": "Using the <https://github.com/marketplace/actions/HubSpot-cms-deploy|HubSpot CMS Deploy Action.>\n\nI can get it working as expected on a personal account, but on an organization account it says it's been deployed without error but there's no code updates on the portal.\n\nIn the logs for the deploy action on the organization account it says\n\n\n```Uploading files from \"theme-name\" to \"theme-name\" in the Design Manager of account ***\n[SUCCESS] Uploading files to \"theme-name\" in the Design Manager is complete\nTo preview this theme, visit: <https://app.HubSpot.com/theme-previewer/***/edit/theme-name>```\n\nwhereas in the personal account you're getting confirmation of every file uploaded\n\n\n```Uploaded file \"/home/runner/work/github-test-project/github-test-project/theme-name/templates/system/email-prefs/subscription-confirmation.html\" to \"theme-name/templates/system/email-prefs/subscription-confirmation.html\"\nUploaded file \"/home/runner/work/github-test-project/github-test-project/theme-name/modules/local/resources/assets/resources-starter.hubdb.json\" to \"theme-name/modules/local/resources/assets/resources-starter.hubdb.json\"\nUploaded file \"/home/runner/work/github-test-project/github-test-project/theme-name/theme.json\" to \"theme-name/theme.json\"```\n\netc. etc. etc.\n\n\nWhat am I missing here?",
    "reply_count": 3,
    "reply_users_count": 2,
    "replies": [
      {
        "time_stamp": "2024-06-04 14:40:06"
      },
      {
        "time_stamp": "2024-06-05 05:22:03"
      },
      {
        "time_stamp": "2024-06-06 13:27:06"
      }
    ]
  },
  {
    "poster": {
      "poster_name": "Christopher Aguilar",
      "poster_handle": "christopher.aguilar"
    },
    "time_stamp": "2024-06-04 11:35:35",
    "text": "<@UJJ239SC9>\n\nI managed to get creating contacts and page view tracking to work with the tracking code (it was some combination of not overwriting the `_hsq` variable, not sending our own internal user IDs, and creating a cookie consent banner on the domain that ended up working)\n\nHowever, I now have a follow-up question:\n\nSending the first/last name with the `identify` calls doesn't get populated for the newly-created contacts, and there is one additional property that I need to track for each contact (`gave_marketing_consent` - custom property, already added in HubSpot); I learned this morning that updating properties with `identify` calls <https://developers.HubSpot.com/beta-docs/reference/api/analytics-and-events/tracking-code#identify-a-visitor|is unsupported for accounts created after ><https://developers.HubSpot.com/beta-docs/reference/api/analytics-and-events/tracking-code#identify-a-visitor|Sep 2021>, so do I now have to use the <https://developers.HubSpot.com/docs/api/crm/contacts|CRM API> to get this working, or is there some other method for getting this data from our app and into HubSpot?"
  },
  {
    "text": "• It is generally best practice that if you're trying to send data into CRM records that should either come through the Forms API or from middleware that can make authenticated API calls using the CRM APIs\n• It is possible to copy event completion data into a contact record property using a workflow. (see 2 screenshots) You want the option for \"copy to object property\" option\n• Finally, for the \"gave marketing consent\", you likely either want to use the <https://developers.HubSpot.com/docs/api/marketing-api/subscriptions-preferences|Subscription preference APIs> (requiring middleware to process the authenticated request) or use the same Workflow and <https://knowledge.HubSpot.com/records/manage-your-subscription-preferences-and-types#update-the-subscription-status-of-contacts-with-a-workflow-professional-and-enterprise-only|add an action that sets a marketing subscription >",
    "time_stamp": "2024-06-04 13:00:10",
    "edited": {
      "time_stamp": "2024-06-04 13:01:32"
    }
  },
  {
    "poster": {
      "poster_name": "Barry Grennan",
      "poster_handle": "barry"
    },
    "time_stamp": "2024-06-04 14:40:06",
    "text": "The client's repo was called .<http://co.uk|co.uk> and it turns out (after hours and hours of troubleshooting) that the periods were what was causing the syncing issue"
  },
  {
    "text": "When I hit the POST API, it becomes unavailable on the conversation page. How can I fix this?",
    "time_stamp": "2024-06-05 00:54:27",
    "reply_count": 3,
    "reply_users_count": 2,
    "replies": [
      {
        "time_stamp": "2024-06-05 02:13:24"
      },
      {
        "time_stamp": "2024-06-05 02:16:38"
      },
      {
        "time_stamp": "2024-06-05 02:28:20"
      }
    ]
  }
]