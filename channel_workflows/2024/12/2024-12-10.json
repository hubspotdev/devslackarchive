[
  {
    "text": "*How to set correctly the code from <https://www.HubSpot.com/programmable-automation-use-cases|Programmable Automation Use Cases> in workflow?*\nHello, I'm trying to format a phone number in a workflow using the code from <https://github.com/HubSpot/sample-workflow-custom-code/blob/main/samples/format_phone.js|Format U.S phone number> but I'm having an error.\nHere's my workflow :arrow_right: <https://app.HubSpot.com/workflows/22804032/platform/flow/600233019/edit/actions/2/custom-code|Format Phone Number>\nI'll post the additional details on the thread.\nCC: <@U071H3X1D6G>",
    "time_stamp": "2024-12-10 03:40:14",
    "reply_count": 7,
    "reply_users_count": 2,
    "replies": [
      {
        "time_stamp": "2024-12-10 03:41:42"
      },
      {
        "time_stamp": "2024-12-10 03:43:10"
      },
      {
        "time_stamp": "2024-12-10 03:44:17"
      },
      {
        "time_stamp": "2024-12-10 03:46:49"
      },
      {
        "time_stamp": "2024-12-10 05:46:59"
      },
      {
        "time_stamp": "2024-12-11 13:54:47"
      },
      {
        "time_stamp": "2024-12-11 13:56:23"
      }
    ]
  },
  {
    "text": "The 'Action' details are set properly (I believe)",
    "time_stamp": "2024-12-10 03:41:42"
  },
  {
    "text": "This is the code I input. I also updated the Secret Name.",
    "time_stamp": "2024-12-10 03:43:10"
  },
  {
    "poster": {
      "poster_name": "Jolly Molos",
      "poster_handle": "jolly"
    },
    "time_stamp": "2024-12-10 03:44:17",
    "text": "But I still have this error\n\nLog:\n```WARNING: The logs for this function have exceeded the 4KB limit.\n...\nansport-security\":\"max-age=31536000; includeSubDomains; preload\",\"vary\":\"origin, Accept-Encoding\",\"x-content-type-options\":\"nosniff\",\"x-HubSpot-auth-failure\":\"401 Unauthorized\",\"x-HubSpot-correlation-id\":\"b07785a2-f928-4d1c-aff0-4a2f29b895ca\"},\"stack\":[\"Error: HTTP-Code: 401\",\"Message: An error occurred.\",\"Body: {\\\"status\\\":\\\"error\\\",\\\"message\\\":\\\"Authentication credentials not found. This API supports OAuth 2.0 authentication and you can find more details at <https://developers.HubSpot.com/docs/methods/auth/oauth-overview>\\\",\\\"correlationId\\\":\\\"b07785a2-f928-4d1c-aff0-4a2f29b895ca\\\",\\\"category\\\":\\\"INVALID_AUTHENTICATION\\\"}\",\"Headers: {\\\"access-control-allow-credentials\\\":\\\"false\\\",\\\"cf-cache-status\\\":\\\"DYNAMIC\\\",\\\"cf-ray\\\":\\\"8efca28a5bd23b42-IAD\\\",\\\"connection\\\":\\\"keep-alive\\\",\\\"content-length\\\":\\\"299\\\",\\\"content-type\\\":\\\"application/json;charset=utf-8\\\",\\\"date\\\":\\\"Tue, 10 Dec 2024 10:43:36 GMT\\\",\\\"nel\\\":\\\"{\\\\\\\"success_fraction\\\\\\\":0.01,\\\\\\\"report_to\\\\\\\":\\\\\\\"cf-nel\\\\\\\",\\\\\\\"max_age\\\\\\\":604800}\\\",\\\"report-to\\\":\\\"{\\\\\\\"endpoints\\\\\\\":[{\\\\\\\"url\\\\\\\":\\\\\\\"https:\\\\\\\\/\\\\\\\\/a.nel.cloudflare.com\\\\\\\\/report\\\\\\\\/v4?s=ij4Q0ZP0xgnXJ%2BJQqqGzXio0JJfKBqLbQsoFegDA00bgWnjycyNsmfVvJrnFo2BfQP6OnkpQFNuDL7e9TwzXMCxoJyXcK69wM4gf9SCkmB1nBsStMmTkSOIoHrqIjIcW\\\\\\\"}],\\\\\\\"group\\\\\\\":\\\\\\\"cf-nel\\\\\\\",\\\\\\\"max_age\\\\\\\":604800}\\\",\\\"server\\\":\\\"cloudflare\\\",\\\"strict-transport-security\\\":\\\"max-age=31536000; includeSubDomains; preload\\\",\\\"vary\\\":\\\"origin, Accept-Encoding\\\",\\\"x-content-type-options\\\":\\\"nosniff\\\",\\\"x-HubSpot-auth-failure\\\":\\\"401 Unauthorized\\\",\\\"x-HubSpot-correlation-id\\\":\\\"b07785a2-f928-4d1c-aff0-4a2f29b895ca\\\"}\",\"    at BasicApiResponseProcessor.&lt;anonymous&gt; (/opt/nodejs/node_modules/@HubSpot/api-client/lib/codegen/crm/contacts/apis/BasicApi.js:227:23)\",\"    at Generator.next (&lt;anonymous&gt;)\",\"    at fulfilled (/opt/nodejs/node_modules/@HubSpot/api-client/lib/codegen/crm/contacts/apis/BasicApi.js:5:58)\",\"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\"]},\"promise\":{},\"stack\":[\"Runtime.UnhandledPromiseRejection: Error: HTTP-Code: 401\",\"Message: An error occurred.\",\"Body: {\\\"status\\\":\\\"error\\\",\\\"message\\\":\\\"Authentication credentials not found. This API supports OAuth 2.0 authentication and you can find more details at <https://developers.HubSpot.com/docs/methods/auth/oauth-overview>\\\",\\\"correlationId\\\":\\\"b07785a2-f928-4d1c-aff0-4a2f29b895ca\\\",\\\"category\\\":\\\"INVALID_AUTHENTICATION\\\"}\",\"Headers: {\\\"access-control-allow-credentials\\\":\\\"false\\\",\\\"cf-cache-status\\\":\\\"DYNAMIC\\\",\\\"cf-ray\\\":\\\"8efca28a5bd23b42-IAD\\\",\\\"connection\\\":\\\"keep-alive\\\",\\\"content-length\\\":\\\"299\\\",\\\"content-type\\\":\\\"application/json;charset=utf-8\\\",\\\"date\\\":\\\"Tue, 10 Dec 2024 10:43:36 GMT\\\",\\\"nel\\\":\\\"{\\\\\\\"success_fraction\\\\\\\":0.01,\\\\\\\"report_to\\\\\\\":\\\\\\\"cf-nel\\\\\\\",\\\\\\\"max_age\\\\\\\":604800}\\\",\\\"report-to\\\":\\\"{\\\\\\\"endpoints\\\\\\\":[{\\\\\\\"url\\\\\\\":\\\\\\\"https:\\\\\\\\/\\\\\\\\/a.nel.cloudflare.com\\\\\\\\/report\\\\\\\\/v4?s=ij4Q0ZP0xgnXJ%2BJQqqGzXio0JJfKBqLbQsoFegDA00bgWnjycyNsmfVvJrnFo2BfQP6OnkpQFNuDL7e9TwzXMCxoJyXcK69wM4gf9SCkmB1nBsStMmTkSOIoHrqIjIcW\\\\\\\"}],\\\\\\\"group\\\\\\\":\\\\\\\"cf-nel\\\\\\\",\\\\\\\"max_age\\\\\\\":604800}\\\",\\\"server\\\":\\\"cloudflare\\\",\\\"strict-transport-security\\\":\\\"max-age=31536000; includeSubDomains; preload\\\",\\\"vary\\\":\\\"origin, Accept-Encoding\\\",\\\"x-content-type-options\\\":\\\"nosniff\\\",\\\"x-HubSpot-auth-failure\\\":\\\"401 Unauthorized\\\",\\\"x-HubSpot-correlation-id\\\":\\\"b07785a2-f928-4d1c-aff0-4a2f29b895ca\\\"}\",\"    at process.&lt;anonymous&gt; (file:///var/runtime/index.mjs:1276:17)\",\"    at process.emit (node:events:519:28)\",\"    at emitUnhandledRejection (node:internal/process/promises:250:13)\",\"    at throwUnhandledRejectionsMode (node:internal/process/promises:385:19)\",\"    at processPromiseRejections (node:internal/process/promises:470:17)\",\"    at process.processTicksAndRejections (node:internal/process/task_queues:96:32)\"]}\n\nMemory: 83/128 MB\nRuntime: 2009.65 ms```\n"
  },
  {
    "poster": {
      "poster_name": "Jolly Molos",
      "poster_handle": "jolly"
    },
    "time_stamp": "2024-12-10 03:46:49",
    "text": "The goal is to get all phone numbers and format them correctly."
  },
  {
    "poster": {
      "poster_name": "Philip Rock",
      "poster_handle": "philip.rock"
    },
    "time_stamp": "2024-12-10 05:46:59",
    "text": "Hi,\nLooks like its an authentication issue\nI believe the Secret is case sensitive, your secret is \"Phone_Number\" but youve got \"process.env.phone_number\""
  }
]